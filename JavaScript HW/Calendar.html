<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="container">
      <h1>My Calendar</h1>
      <p>yyyy年mm月</p>
      <div class="table-responsive">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th scope="col">日</th>
              <th scope="col">一</th>
              <th scope="col">二</th>
              <th scope="col">三</th>
              <th scope="col">四</th>
              <th scope="col">五</th>
              <th scope="col">六</th>
            </tr>
          </thead>
          <button type="button" class="btn btn-primary" id="lastMonth">
            上個月
          </button>
          <button type="button" class="btn btn-primary mx-1" id="thisMonth">
            這個月
          </button>
          <button type="button" class="btn btn-primary" id="nextMonth">
            下個月
          </button>

          <!-- <tbody>
          <tr class="">
            <td scope="row">R1C1</td>
            <td>R1C2</td>
            <td>R1C3</td>
          </tr>
          <tr class="">
            <td scope="row">Item</td>
            <td>Item</td>
            <td>Item</td>
          </tr>
        </tbody> -->
        </table>
        <!-- Button trigger modal -->
        <button
          type="button"
          class="btn btn-primary btn-lg"
          data-bs-toggle="modal"
          data-bs-target="#modalId"
        >
          Edit schedule
        </button>

        <!-- Modal -->
        <div
          class="modal fade"
          id="modalId"
          tabindex="-1"
          role="dialog"
          aria-labelledby="modalTitleId"
          aria-hidden="true"
        >
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="modalTitleId">Modal title</h5>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                ></button>
              </div>
              <div class="modal-body">
                <div class="container-fluid">Add rows here</div>
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Close
                </button>
                <button type="button" class="btn btn-primary">Save</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      var modalId = document.getElementById("modalId");

      modalId.addEventListener("show.bs.modal", function (event) {
        // Button that triggered the modal
        let button = event.relatedTarget;
        // Extract info from data-bs-* attributes
        let recipient = button.getAttribute("data-bs-whatever");

        // Use above variables to manipulate the DOM
      });
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
      crossorigin="anonymous"
    ></script>
    <script>
      //Modal start
      //宣告

      let today = new Date();
      let year = today.getFullYear();
      let month = today.getMonth();

      //DOM

      const lastMonthBtn = document.getElementById("lastMonth"); //上個月
      const thistMonthBtn = document.getElementById("thisMonth"); //這個月
      const nextMonthBtn = document.getElementById("NextMonth"); //下個月
      const yearMonthDom = document.querySelector("h3"); //年月

      const tbodyDOM = document.querySelector;

      lastMonthBtn.addEventListener("click", function () {
        alert(123);
        //月份-1

        //0~11月
        month--;
        if (month === -1) {
          year--;
          month = 11;
        }
        renderDate();
      });
      thisMonthBtn.addEventListener("click", function () {
        alert(123);
        let thisDate = new Date();
        month = thisDate.getMonth;
        year = thisDate.getFullYear;
      });
      nextMonthBtn.addEventListener("click", function () {
        alert(123);

        month++;
        if (month > 11) {
          year++;
          month = 1;
        }
      });

      window.onload = function () {
        renderDate();
      };

      //Function
      function renderDate() {
        //渲染render
        yearMonthDom.innerText = `${year}年${month + 1}月`;
        //第一天到底是禮拜幾
        let dayOfMonth = new Date(year, month, 1).getDay();

        console.log("禮拜幾" + dayOfMonth);

        //這個月有幾天
        let dateofmonth = new Date(year, month + 1, 0).getDate();
        console.log(dateOfMonth + "天");

        let weeks = Math;
        //第一天到底是禮拜幾

        //tr
        for (let i = 0; i < weeks; i++) {
          let trDOM = document.createElement("tr");
          for (let j = 0; j < 7; j++) {
            let tdDOM = document.createElement("td");
            tdDOM.innerText = "A";
            //i = 0 表示第一週
            if (i === 0 && j < dayOfMonth) {
              tdDOM.innerText = "A";
            } else {
              if (day <= dateofmonth) {
                tdDOM.innerText = day;
                tdDOM.addEventListener("click");
              }
            }

            trDOM.append(tdDOM);
            tbody.append(trDOM);
          }
        }
      }
      function tdClickFN(year,month,day){
        addon1DOM.value = `${year}-${month}-${day}`
        myModalAdd.show()
        //取日期 寫到Modal的 input.value
      }
      //取到 localstorage 資料
      function getLocalStorage(key){
        let data = JSON.parse(localStorage.getItem(key))
        return data
      }
      addon
    </script>
  </body>
</html>
